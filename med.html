<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>투약 기록 (2026~) - Cloud Sync</title>
  <style>
    :root{
      color-scheme: light dark;
      --bg: Canvas; --fg: CanvasText; --muted: rgba(128,128,128,.75);
      --line: rgba(128,128,128,.28); --card: rgba(128,128,128,.10);
      --accent: #0a84ff; --danger: #ff3b30; --warn: #ffcc00;
      --radius: 16px; --pad: 14px; --tap: 48px;
      --shadow: 0 6px 18px rgba(0,0,0,.10); --shadow2: 0 10px 30px rgba(0,0,0,.14);
    }
    *{ box-sizing:border-box; }
    body{ margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,Arial,sans-serif; background:var(--bg); color:var(--fg); }
    .wrap{ max-width:720px; margin:0 auto; padding: calc(env(safe-area-inset-top) + 14px) 14px calc(92px + env(safe-area-inset-bottom)); }
    header{ display:flex; align-items:flex-end; gap:10px; margin-bottom:12px; }
    h1{ margin:0; font-size:20px; letter-spacing:-0.2px; }
    .sub{ margin-left:auto; font-size:12px; color:var(--muted); text-align:right; }
    .card{ background: color-mix(in oklab, var(--card) 100%, transparent); border:1px solid var(--line); border-radius:var(--radius); padding:var(--pad); box-shadow:var(--shadow); margin:12px 0; }
    .grid{ display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
    .grid .full{ grid-column: 1 / -1; }
    label{ display:grid; gap:6px; font-size:12px; color:var(--muted); }
    input, select, button{ width:100%; min-height:var(--tap); border-radius:14px; border:1px solid var(--line); background:transparent; color:var(--fg); padding:10px 12px; font:inherit; font-size:16px; }
    input::placeholder{ color: color-mix(in oklab, var(--muted) 70%, transparent); }
    .pill{ display:flex; align-items:center; gap:8px; padding:10px 12px; border-radius:999px; border:1px solid var(--line); font-size:12px; color:var(--muted); margin-top:10px; background: color-mix(in oklab, var(--card) 70%, transparent); }
    .dot{ width:10px; height:10px; border-radius:999px; background:var(--warn); }
    .pill.ok .dot{ background:#2ecc71; } .pill.bad .dot{ background:var(--danger); } .pill.warn .dot{ background:var(--warn); }
    .seg{ display:grid; grid-template-columns: 1fr 1fr; gap:8px; }
    .seg button{ min-height:44px; font-size:14px; }
    .seg button.active{ border-color: color-mix(in oklab, var(--accent) 70%, var(--line)); box-shadow:var(--shadow2); }
    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    .row .grow{ flex:1 1 auto; }
    .listHeader{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10px; }
    .count{ font-size:12px; color:var(--muted); }
    .item{ border:1px solid var(--line); border-radius:16px; padding:12px; background: color-mix(in oklab, var(--card) 60%, transparent); display:flex; gap:12px; align-items:center; margin-bottom:10px; }
    .item .when{ display:grid; gap:2px; min-width:110px; }
    .item .date{ font-weight:700; font-size:14px; }
    .item .time{ font-size:13px; color:var(--muted); }
    .item .note{ flex:1 1 auto; font-size:13px; color:var(--muted); overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
    .item .actions{ display:flex; gap:8px; }
    .iconBtn{ width:44px; min-height:44px; padding:0; border-radius:14px; display:grid; place-items:center; font-size:16px; }
    .bottomBar{ position:fixed; left:0; right:0; bottom:0; padding:10px 14px calc(10px + env(safe-area-inset-bottom)); background: color-mix(in oklab, var(--bg) 85%, transparent); backdrop-filter: blur(10px); border-top:1px solid var(--line); }
    .barInner{ max-width:720px; margin:0 auto; display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
    .btn{ min-height:52px; border-radius:16px; font-weight:700; }
    .btn.primary{ border-color: color-mix(in oklab, var(--accent) 75%, var(--line)); }
    .btn.danger{ border-color: color-mix(in oklab, var(--danger) 75%, var(--line)); color:var(--danger); }
    details summary{ cursor:pointer; list-style:none; user-select:none; font-size:14px; font-weight:700; }
    details summary::-webkit-details-marker{ display:none; }
    .smallBtn{ min-height:44px; font-size:14px; }
    .dangerText{ color:var(--danger); }
    @media (min-width:560px){ .grid{ grid-template-columns: 1fr 1fr 1fr; } .grid .full{ grid-column:1 / -1; } }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>투약 기록 (2026~)</h1>
      <div class="sub">
        <div id="authLine">로그인 필요</div>
        <div style="opacity:.8;">mymed-35647</div>
      </div>
    </header>

    <div class="card" id="authCard">
      <div class="row">
        <button id="loginBtn" class="smallBtn" type="button">Google로 로그인</button>
        <button id="logoutBtn" class="smallBtn dangerText" type="button" style="display:none;">로그아웃</button>
      </div>
      <div class="pill warn" id="statusPill"><span class="dot"></span><span id="statusText">대기</span></div>
      <div style="margin-top:10px;font-size:12px;color:var(--muted);line-height:1.4;">
        같은 Google 계정으로 로그인하면 기기/브라우저가 달라도 동일 데이터가 열립니다.
      </div>
    </div>

    <div class="card" id="entryCard">
      <div class="grid">
        <label>
          날짜
          <input type="date" id="dateInput" />
        </label>
        <label>
          투약 시간
          <input type="time" id="timeInput
